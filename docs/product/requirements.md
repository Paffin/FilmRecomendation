# Продуктовые требования — сервис рекомендаций фильмов/сериалов/аниме

## Видение
Создать русскоязычный сервис, который за пару минут понимает вкус пользователя, даёт 5 гиперрелевантных рекомендаций с мгновительной заменой по дизлайку, ведёт список к просмотру и историю, показывает аналитику и «карту вкуса», учитывает контекст «режима вечера» и объясняет, почему советует каждый тайтл.

## Целевая аудитория
- Киноманы и сериальные зрители 18–45, русскоязычные.
- Пользователи, уставшие от общего топа и желающие персонализации.
- Семьи/пары, выбирающие тайтл под конкретное настроение и время.

## Ключевые сценарии
1) Регистрация/логин → попадание в онбординг.
2) Онбординг вкуса: выбор типов контента, быстрый поиск тайтлов, отметка «смотрел», лайк/дизлайк части из них → стартовый профиль.
3) Экран рекомендаций (5 карточек): лайк = в `watchlist` + улучшение профиля, дизлайк = в антисписок и мгновенная замена карточки. Контекст «Режим вечера» влияет на выдачу.
4) Watchlist: все лайкнутые, смена статусов planned/watching/watched/dropped, переход к деталям.
5) История: тайтлы со статусом watched, фильтры (период, жанры, тип), редактирование лайк/дизлайк и оценки.
6) Профиль и аналитика: графики жанров/стран/лет, суммарное время, топ‑режиссёры, «карта вкуса», антисписок с возможностью вернуть тайтл.
7) Карточка тайтла: детали, похожие, добавить в список/смотрел, лайк/дизлайк.

## Функциональные требования
- UI/копирайт на русском; код/типы на английском.
- Рекомендации всегда 5 позиций; при дизлайке конкретная карточка заменяется новым кандидатом без перезагрузки страницы.
- Лайк из любой точки автоматически добавляет в watchlist со статусом `planned` (если не задан иной).
- Антисписок: все дизлайки исключаются из будущих рекомендаций, отображаются в профиле отдельным табом с кнопкой «Вернуть».
- «Режим вечера»: параметры mood, mindset, company, timeAvailable передаются в движок и учитываются в скоринге.
- Пояснения на карточке рекомендаций: 2–3 причины в понятном русском.
- Поиск и детали тайтлов через backend (TMDB `language=ru-RU`, извлекать `imdb_id` при наличии).
- Статусы тайтлов: planned, watching, watched, dropped; поля liked/disliked, rating 1–10, lastInteractionAt, source (onboarding/search/recommendation/manual).
- История действий/фидбэка сохраняется (FeedbackEvent) и привязана к RecommendationSession при наличии.
- Адаптив: desktop ≥1280, tablet ~768–1024, mobile 360–430.
- Skeleton‑лоадеры и тоасты ошибок; graceful fallback при проблемах TMDB.

## Нефункциональные
- Скорость ответа рекомендаций: <800 мс при тёплом кэше.
- Надёжность: устойчивость к rate limit/таймаутам TMDB, унифицированные ошибки API.
- Безопасность: JWT access+refresh, bcrypt пароли, секреты только в backend/.env.
- Качество: строгий TypeScript, ESLint+Prettier, unit+integration тесты, e2e базового сценария.
- Docker Compose: backend, frontend, postgres (и pgadmin опционально), nginx для продакшена.

## Метрики успеха (MVP)
- Время до первой релевантной рекомендации < 90 секунд после регистрации.
- ≥70% пользователей совершают ≥1 лайк на первом экране рекомендаций.
- ≥50% завершают онбординг.

## Тональность интерфейса
- Дружелюбный, деловой, без сюсюканья. Короткие фразы, прямые действия: «Смотрел», «В список», «Не подходит». В пояснениях — конкретика («Вы любите триллеры 2010-х»), без абстракций.
